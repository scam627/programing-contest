<!DOCTYPE html>
<html>
	<head>
		<!-- Import Google Icon Font -->
		<link
			href="https://fonts.googleapis.com/icon?family=Material+Icons"
			rel="stylesheet"
		/>
		<!-- Import materialize.css -->
		<link
			type="text/css"
			rel="stylesheet"
			href="css/materialize.min.css"
			media="screen,projection"
		/>

		<!-- Let browser know website is optimized for mobile -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	</head>

	<body>
		<br />
		<div class="container">
			<br />
			<div class="row" id="contests"></div>
		</div>
		<div class="fixed-action-btn">
			<a class="btn-floating btn-large red">
				<i class="large material-icons">keyboard_arrow_left</i>
			</a>
			<ul>
				<li>
					<a class="btn-floating red"
						><i class="material-icons">insert_chart</i></a
					>
				</li>
				<li>
					<a class="btn-floating yellow darken-1"
						><i class="material-icons">format_quote</i></a
					>
				</li>
				<li>
					<a class="btn-floating green" href="./views/problems.html"
						><i class="material-icons">list_alt</i></a
					>
				</li>
				<li>
					<a class="btn-floating blue"
						><i class="material-icons">visibility</i></a
					>
				</li>
			</ul>
		</div>
		<!-- JavaScript at end of body for optimized loading -->
		<script type="text/javascript" src="index.js"></script>
		<script type="text/javascript" src="js/materialize.min.js"></script>
		<script>
			ajaxGet("https://codeforces.com/api/contest.list", resp => {
				var contest = JSON.parse(resp);
				state = true;
				for (let i = 0; state; i++) {
					// const date = new Date(null);
					// console.log(contest.result[i].startTimeSeconds);
					const url = "http://codeforces.com/contests/" + contest.result[i].id;
					const date = new Date(null);
					date.setSeconds(contest.result[i].startTimeSeconds);
					const startTime = date.toISOString();
					const newNode =
						'<div class="col s6"><div class="card hoverable"><div class="card-image waves-effect waves-block waves-light"></div><div class="card-content"><span class="card-title activator grey-text text-darken-4">' +
						contest.result[i].name +
						'<i class="material-icons right">more_vert</i></span><p><a class="waves-effect waves-light btn" href="' +
						url +
						'">Go</a><span class="right" >' +
						date.toDateString() +
						'</span></p></div><div class="card-reveal"><span class="card-title grey-text text-darken-4">Card Title<i class="material-icons right">close</i></span><p>Faltan ' +
						startTime +
						" para que inicie el contest </p></div></div></div>";
					document
						.getElementById("contests")
						.insertAdjacentHTML("beforeend", newNode);
					state = contest.result[i].phase == "BEFORE";
				}
				// console.log(contest.result[0]);
			});
		</script>
	</body>
</html>
