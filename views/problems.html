<!DOCTYPE html>
<html>
	<head>
		<!-- Import Google Icon Font -->
		<link
			href="https://fonts.googleapis.com/icon?family=Material+Icons"
			rel="stylesheet"
		/>
		<!-- Import materialize.css -->
		<link
			type="text/css"
			rel="stylesheet"
			href="../css/materialize.min.css"
			media="screen,projection"
		/>

		<!-- Let browser know website is optimized for mobile -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	</head>

	<body>
		<br />
		<div class="container">
			<br />
			<div class="row">
				<ul class="collection with-header" id="problems">
					<li class="collection-header">
						<div class="row">
							<div class="col s12">
								<div class="row">
									<div class="input-field col s12">
										<i onclick="deployProblems()" class="material-icons prefix"
											>search</i
										>
										<input
											type="text"
											id="autocomplete-input"
											class="autocomplete"
										/>
										<label for="autocomplete-input">Autocomplete</label>
									</div>
								</div>
							</div>
						</div>
					</li>
				</ul>
			</div>
		</div>
		<div class="fixed-action-btn">
			<a class="btn-floating btn-large red">
				<i class="large material-icons">keyboard_arrow_left</i>
			</a>
			<ul>
				<li>
					<a class="btn-floating red"
						><i class="material-icons">insert_chart</i></a
					>
				</li>
				<li>
					<a class="btn-floating yellow darken-1"
						><i class="material-icons">format_quote</i></a
					>
				</li>
				<li>
					<a class="btn-floating green"
						><i class="material-icons">list_alt</i></a
					>
				</li>
				<li>
					<a class="btn-floating blue" href="../index.html"
						><i class="material-icons">visibility</i></a
					>
				</li>
			</ul>
		</div>
		<!-- JavaScript at end of body for optimized loading -->
		<script type="text/javascript" src="../index.js"></script>
		<script type="text/javascript" src="../js/materialize.min.js"></script>
		<script>
			function deployProblems() {
				let tag = document.getElementById("autocomplete-input").value;
				ajaxGet(
					`https://codeforces.com/api/problemset.problems?tags=${tag}`,
					resp => {
						let response = JSON.parse(resp);
						for (let i = 0; i < 20; i++) {
							const obj = response.result.problems[i];
							const url = `https://codeforces.com/contest/${
								obj.contestId
							}/problem/${obj.index}`;
							const newNode = `
							<li class="collection-item">
								<div>
									${obj.name}
									<a href="${url}" class="secondary-content"><i class="material-icons">send</i></a>
							</div>
						</li>`;
							document
								.getElementById("problems")
								.insertAdjacentHTML("beforeend", newNode);
						}
					}
				);
			}
		</script>
	</body>
</html>
